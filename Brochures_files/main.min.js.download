function track(t,o,e,a){$.post("./track",{type:t,itemid:o,itemname:e,itemdesc:a})}function trackDraw(t,o){$.post("./trackdraw",{type:t,itemid:o})}function playVideo(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(function(t){video.src=window.URL.createObjectURL(t),localStream=t,video.play()})}function stopVideo(){localStream.getVideoTracks()[0].stop(),localStream.getAudioTracks()[0].stop()}function textChatUpdate(){$.post("./chat-room/chat-log",{fn:"update",for:me,chat_id:chatlog},function(t){var o="";if(t.text)for(var e=0;e<t.text.length;e++)if(o+=t.text[e],!ban&&t.text[e].indexOf("[SYSTEM] Remove User")>-1)alert("Your invitation to the chat/interview has been declined."),window.close();else if(!ccchat&&!notifyjoin&&t.text[e].indexOf(" has joined the room")>-1&&t.text[e].indexOf(me+" has joined the room.")<=-1){notifyjoin=!0;var a=t.text[e].split("[SYSTEM] ");a=a[1].split(" has joined the room"),otherperson=a[0],chatstarttime=(new Date).getTime()+18e5;var i="";exhibitor&&$.post("./chat-room/chat-log",{fn:"getother",chat_id:chatlog,ccchat:ccchat},function(t){i=t.msg},"json"),chatTimer=setInterval(function(){chattime=chatstarttime-(new Date).getTime();var t=Math.floor(chattime/6e4),o=Math.floor(chattime%6e4/1e3),e='Connected with<br /><em class="blue">'+otherperson+"</em>";""!=i&&(e+=" "+i),e+="<br />Time Left: "+t+"m "+o+"s",$("h4#chat-timing").html(e),chattime<=3e5&&$("h4#chat-timing").append('<div class="red">You have lesser than 5 mins left.</div>'),(void 0==t||isNaN(t)||void 0==o||isNaN(o)||t<=0&&o<=0)&&(console.log("Time Up!"),playAlert("pop"),clearInterval(chatTimer),clearInterval(chatint),alert("Time limit of 30 minutes is up. This room will be closed."),concierge?window.location=baseurl+"chat-room/chat-room-concierge/id/"+chatlog+"/new/id":exhibitor?window.location=baseurl+"chat-room/chat-room/id/"+chatlog+"/new/id":window.close())},1e3),playAlert("glass"),alert(otherperson+" has joined this chat.")}else!ccchat&&!notifyleft&&t.text[e].indexOf(" has left the room")>-1&&t.text[e].indexOf(me+" has left the room.")<=-1&&(notifyleft=!0,console.log(otherperson+" has left the room."),playAlert("pop"),alert(otherperson+" has left the room."),clearInterval(chatTimer),clearInterval(chatint),concierge?window.location=baseurl+"chat-room/chat-room-concierge/id/"+chatlog+"/new/id":exhibitor?window.location=baseurl+"chat-room/chat-room/id/"+chatlog+"/new/id":window.close());o!=curChatTxt&&(console.log("You have a new message!"),playAlert("submarine"),$(".chat-history").html(o),$(".chat-history").animate({scrollTop:$(".chat-history").prop("scrollHeight")},2500),curChatTxt=o)},"json")}function textChatBan(){ban=!0;textChatSend("[SYSTEM] Remove User"),$.post("./chat-room/chat-log",{fn:"ban",chat_id:chatlog},function(t){console.log("Remove User."),concierge?window.location=baseurl+"chat-room/chat-room-concierge/id/"+chatlog+"/new/id":exhibitor?window.location=baseurl+"chat-room/chat-room/id/"+chatlog+"/new/id":window.close()},"json")}function textChatExit(){notifyleft=!0,clearInterval(chatint);textChatSend("[SYSTEM] "+me+" has left the room"),$.post("./chat-room/chat-log",{fn:"exit",chat_id:chatlog,ccchat:ccchat},function(t){concierge?window.location=baseurl+"concierge":window.close()},"json")}function textChatSend(t){void 0!=t&&""!=t&&(t=$("<div />").text(t).html(),$.post("./chat-room/chat-log",{fn:"send",from:me,msg:t,chat_id:chatlog},function(t){textChatUpdate()},"json"))}function checkOnlineUsers(){$.post("./process/lounge",function(t){$("#online-users").html(t)})}function initInputFile(t){void 0==t&&(t=20971520);var o=window.URL||window.webkitURL;$("input[type=file]").each(function(){var e=$(this),a=e.next("label"),i=a.html();e.on("change",function(r){for(var n="",c=!1,l=0;l<this.files.length;l++){var s=this.files[l],h=s.name,d=s.type,p=s.size;if(console.log(h,d,p),p>t)c=!0,console.log(h+" has exceeded the maximum file size limit."),alert(h+" has exceeded the maximum file size limit.");else switch(d){case"image/jpeg":case"image/png":case"image/gif":var w=new Image,v=o.createObjectURL(s);w.onload=function(){(this.width>1600||this.height>1600)&&(c=!0,a.html(i),e.removeClass("active").val(""),alert("Please reduce the dimension of image file:\n"+this.name+"\nto within 1600 width by 1600 height.")),o.revokeObjectURL(v)},w.src=v,w.setAttribute("name",h)}}c||(this.files&&this.files.length>1?n=(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):r.target.value&&(n=r.target.value.split("\\").pop())),n?(a.find("span").html(n),e.addClass("active")):(a.html(i),e.removeClass("active").val(""))})})}function reloadJS(){var pull=$("nav a.mobile"),menu=$("nav ul"),items=$("nav ul li a"),menuHeight=menu.height();$(pull).on("click",function(t){t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation(),menu.slideToggle()}),$(".tabbed a").on("click",function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();var o=$(this).closest(".tabbed"),e=$(this).attr("href");o.find("a").removeClass("selected"),$(this).addClass("selected"),o.next("div.tabbed-content").html("<div>Loading...</div>").load(e),track(2,"",e,"Link clicked linking to: "+$(this).attr("href"))}),$(".view-profile").on("click",function(){console.log($(this),"clicked");var t=$(this).data("id");$.post("./process/visitor-profile-viewed",{uid:t})});var owl=$(".owl-carousel");owl.owlCarousel({items:6,itemsMobile:[425,2],navigation:!1}),owl_slides=owl.data("owlCarousel"),$(".owl-next").on("click",function(t){owl.trigger("owl.next")}),$(".owl-prev").on("click",function(t){owl.trigger("owl.prev")}),$("a").on("click",function(t){$(this).attr("data-featherlight")||$(this).hasClass("owl")||$(this).hasClass("deletethis")||(t.stopPropagation(),t.stopImmediatePropagation(),track(2,"",window.location.pathname,"Link clicked linking to: "+$(this).attr("href")))}),initInputFile();var oldsearch="";$(".search-hall").on("keyup",function(t){var o=t.which,e=$(this).val();$(this).val(e.toUpperCase()),(e=e.toUpperCase())!=oldsearch&&13==o&&searchBooths()});var oldsearch2="";$(".search-jobs").on("keyup",function(t){var o=t.which,e=$(this).val();$(this).val(e.toUpperCase()),(e=e.toUpperCase())!=oldsearch2&&13==o&&searchJobs()});var oldsearch3="";$(".search-visitors").on("keyup",function(t){var o=t.which,e=$(this).val();$(this).val(e.toUpperCase()),(e=e.toUpperCase())!=oldsearch3&&13==o&&searchVisitors()}),$(".booth-area a, .concierge-area a, .cinema-area a").on("click",function(){$("video").length>0&&$("video").get(0).pause()}),$(".chatroom input#chat").on("keyup",function(t){13==t.which&&(textChatSend($(this).val()),$(this).val(""))}),$(".chatroom button.send").off().on("click",function(t){var o=$(".chatroom input#chat");textChatSend(o.val()),o.val("")}),$(".chatroom button.kick").off().on("click",function(t){textChatBan()}),$(".chatroom button.exit").off().on("click",function(t){textChatExit()}),$(".booth_selection").on("change",function(e){var ex=$("#exhibitor_id").val(),v1=$("#booth_design_select").val(),v2=$("#booth_color_select").val(),arrows={b1:{profile:"",brochure:"arrow-right",job:"arrow-down",video:"arrow-left",contact:"",chat:"arrow-up"},b2:{profile:"arrow-left",brochure:"arrow-right",job:"arrow-down",video:"arrow-left",contact:"",chat:""},b3:{profile:"",brochure:"arrow-down",job:"arrow-down",video:"arrow-left",contact:"",chat:"arrow-up"},b4:{profile:"",brochure:"arrow-left",job:"arrow-down",video:"arrow-left",contact:"arrow-down",chat:"arrow-top"},b5:{profile:"",brochure:"arrow-right",job:"arrow-left",video:"arrow-down",contact:"arrow-left",chat:"arrow-right"},b6:{profile:"arrow-right",brochure:"arrow-up",job:"arrow-right",video:"arrow-down",contact:"arrow-down",chat:"arrow-up"},b7:{profile:"arrow-left",brochure:"arrow-down",job:"arrow-up",video:"arrow-down",contact:"arrow-down",chat:""},b8:{profile:"",brochure:"arrow-left",job:"arrow-up",video:"arrow-left",contact:"arrow-down",chat:"arrow-up"}};if(void 0!=v1&&""!=v1&&void 0!=v2&&""!=v2){$(".booth-area").attr("id","booth-type-"+v1),$(".arrow").removeClass("arrow-left arrow-up arrow-down arrow-right"),$("a#exhibitor-profile div.arrow").addClass(eval("arrows.b"+v1+".profile")),$("a#exhibitor-brochures div.arrow").addClass(eval("arrows.b"+v1+".brochure")),$("a#job-openings div.arrow").addClass(eval("arrows.b"+v1+".job")),$("a#video-gallery div.arrow").addClass(eval("arrows.b"+v1+".video")),$("a#contact-us div.arrow").addClass(eval("arrows.b"+v1+".contact")),$("a#chat-with-us div.arrow").addClass(eval("arrows.b"+v1+".chat")),$("a#walkin-interview div.arrow").addClass(eval("arrows.b"+v1+".interview")),$("img#booth-type").attr("src","./img/booths-2020/"+v1+"-"+v2+".png");var option={id:ex,type:v1,color:v2};$.post("./process/exhibitor-booth-design",option,function(t){$("div.msg").remove(),$("form#booth-selection").append(t),$("div.msg").delay(3e3).slideUp()})}}),$('input[name^="apply-method"]').on("click",function(){$("div.applymethod").hide(),$("div.applymethod input").val(""),$("div.applymethod.apply"+$(this).val()).slideDown()})}var curChatTxt="",ban="",notifyjoin=!1,notifyleft=!1,idle=0,owl_slides,chatstarttime,otherperson="";$(function(){$(document).ajaxStart(function(){}).ajaxComplete(function(){reloadJS()});new Swiper(".swiper-container",{pagination:".swiper-pagination",paginationClickable:!0,nextButton:".swiper-button-next",prevButton:".swiper-button-prev"});$(".map:visible").rwdImageMaps(),$(".map:visible").maphilight();var t=$("#back-to-top");$(document).scroll(function(){$(document).scrollTop()>50?t.addClass("show"):t.removeClass("show")}),t.on("click",function(t){t.preventDefault(),console.log("back to top"),$("html, body").animate({scrollTop:0},"300")}),reloadJS()});